{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Taha\\\\Desktop\\\\notion-excel-sync\\\\excel-notion-ui\\\\src\\\\Profile.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { format, parseISO } from 'date-fns'; // Tarih formatlama iÃ§in\nimport './Profile.css';\nimport { tr } from 'date-fns/locale';\n\n// Backend ve Lemon Squeezy URL'leri\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://127.0.0.1:8000';\n// ðŸš¨ KRÄ°TÄ°K: Kendi Lemon Squeezy Store URL'niz\nconst LEMONSQUEEZY_STORE_URL = 'https://notixel.lemonsqueezy.com';\n\n// ðŸš¨ KRÄ°TÄ°K: subscription.py ve Pricing.tsx ile EÅžLEÅžMELÄ°DÄ°R\nconst PLAN_VARIANTS = {\n  basic: {\n    id: 1035879,\n    price: \"10\",\n    cta_text: \"Basic\"\n  },\n  pro: {\n    id: 1035902,\n    price: \"20\",\n    cta_text: \"Pro\"\n  },\n  exclusive: {\n    id: 1035903,\n    price: \"50\",\n    cta_text: \"Exclusive\"\n  }\n};\n\n// API'den gelen verinin yapÄ±sÄ± (UserSubscriptionStatus Pydantic modeline karÅŸÄ±lÄ±k gelir)\n\n// Config.py'deki limitleri gÃ¶stermek iÃ§in basit bir map\nconst LIMITS = {\n  free: {\n    label: \"Free (VarsayÄ±lan)\",\n    syncs: 0,\n    interval: 60\n  },\n  basic: {\n    label: \"Basic Plan\",\n    syncs: 3,\n    interval: 60\n  },\n  pro: {\n    label: \"Pro Plan\",\n    syncs: 10,\n    interval: 30\n  },\n  exclusive: {\n    label: \"Exclusive Plan\",\n    syncs: 9999,\n    interval: 15\n  }\n};\nconst Profile = ({\n  setStep\n}) => {\n  _s();\n  const userId = localStorage.getItem('user_id');\n  const [status, setStatus] = useState(null);\n  const [message, setMessage] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // --- 1. Abonelik Durumunu Ã‡ekme ---\n  const fetchSubscriptionStatus = useCallback(async id => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/subscription/status/${id}`);\n      if (!response.ok) {\n        throw new Error(\"Abonelik durumu alÄ±namadÄ±.\");\n      }\n      const data = await response.json();\n      setStatus(data);\n    } catch (error) {\n      setMessage(\"Abonelik durumunuz yÃ¼klenirken bir sorun oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin.\");\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    if (userId) {\n      fetchSubscriptionStatus(userId);\n    } else {\n      setMessage(\"GÃ¶rÃ¼ntÃ¼lenecek kullanÄ±cÄ± verisi yok. LÃ¼tfen tekrar giriÅŸ yapÄ±n.\");\n      setIsLoading(false);\n    }\n  }, [userId, fetchSubscriptionStatus]);\n\n  // --- 2. Hesap Silme Ä°ÅŸlemi ---\n  const handleDeleteAccount = async () => {\n    if (!userId) {\n      setMessage(\"KullanÄ±cÄ± kimliÄŸi bulunamadÄ±.\");\n      return;\n    }\n    if (!window.confirm(\"HesabÄ±nÄ±zÄ± ve tÃ¼m verilerinizi kalÄ±cÄ± olarak silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz.\")) {\n      return;\n    }\n    setMessage(\"HesabÄ±nÄ±z siliniyor...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/subscription/delete-account/${userId}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || \"Hesap silinirken bir hata oluÅŸtu.\");\n      }\n\n      // BaÅŸarÄ±lÄ± olursa, yerel depolamayÄ± temizle ve ana sayfaya yÃ¶nlendir\n      localStorage.removeItem('user_id');\n      localStorage.removeItem('excel_file_id');\n      localStorage.removeItem('excel_file_name');\n      localStorage.removeItem('notion_database_id');\n      localStorage.removeItem('notion_db_name');\n      localStorage.removeItem('user_email');\n      alert(\"HesabÄ±nÄ±z ve tÃ¼m verileriniz silinmiÅŸtir. 30 gÃ¼n sonra verileriniz sunucumuzdan tamamen temizlenecektir.\");\n      setStep('home');\n    } catch (error) {\n      setMessage(`Hata: ${error instanceof Error ? error.message : \"Bilinmeyen bir hata oluÅŸtu.\"}`);\n    }\n  };\n\n  // YÃ¼kleniyor durumu\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: \"Loading subscription status...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 16\n    }, this);\n  }\n  if (!status) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container error-message\",\n      children: \"Kullan\\u0131c\\u0131 profil bilgileri y\\xFCklenemiyor.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 16\n    }, this);\n  }\n\n  // --- 3. Lemon Squeezy URL'si OluÅŸturma Fonksiyonu ---\n  const getLemonSqueezyCheckoutUrl = (variantId, planLevel) => {\n    // Lemon Squeezy'nin \"Upgrade/Downgrade\" URL yapÄ±sÄ±\n    // ðŸš¨ KRÄ°TÄ°K: user_email'i ileterek, var olan bir abonelik varsa otomatik olarak YÃ¼kseltme/DÃ¼ÅŸÃ¼rme arayÃ¼zÃ¼ne yÃ¶nlendirilir.\n\n    // EÄŸer kullanÄ±cÄ± bir planÄ± zaten iptal etmiÅŸse ve end_date bilgisi varsa, \n    // Lemon Squeezy onu yÃ¼kseltme/dÃ¼ÅŸÃ¼rme yerine yeni bir abonelik baÅŸlatmaya yÃ¶nlendirir.\n\n    const isCurrentPlan = planLevel === status.subscription_level;\n\n    // Aktif abonelik varsa ve mevcut planÄ± deÄŸilse, yÃ¼kseltme/dÃ¼ÅŸÃ¼rme akÄ±ÅŸÄ±nÄ± baÅŸlat (checkout'un Ã¼zerine yazma)\n    if (status.is_subscription_active && !isCurrentPlan) {\n      // Ã–rnek: https://notixel.lemonsqueezy.com/billing?email=user@example.com\n      // Bu, kullanÄ±cÄ±nÄ±n mevcut aboneliÄŸini yÃ¶nettiÄŸi sayfaya yÃ¶nlendirir.\n      return `${LEMONSQUEEZY_STORE_URL}/billing?email=${status.email}`;\n    }\n\n    // Aktif abonelik yoksa veya mevcut planÄ± satÄ±n almaya Ã§alÄ±ÅŸÄ±yorsa (yenileme/yeni)\n    // Standart checkout linki: https://notixel.lemonsqueezy.com/checkout/12345?email=user@example.com\n    return `${LEMONSQUEEZY_STORE_URL}/checkout/${variantId}?email=${status.email}`;\n  };\n\n  // --- 4. Render Edilecek BileÅŸen ---\n  const activeLevelInfo = LIMITS[status.subscription_level] || LIMITS['free'];\n  const activeLevelLabel = activeLevelInfo.label;\n  const isCancelled = status.subscription_end_date && parseISO(status.subscription_end_date) < new Date();\n\n  // EÄŸer iptal edilmiÅŸse bile, bitiÅŸ tarihine kadar aktif sayÄ±lÄ±r.\n  let statusText = status.is_subscription_active ? \"Aktif (Ã–denmiÅŸ DÃ¶nem Ä°Ã§inde)\" : \"Pasif (Ãœcretsiz Plana DÃ¶ndÃ¼rÃ¼ldÃ¼)\";\n  if (status.subscription_end_date && status.is_subscription_active) {\n    const endDate = parseISO(status.subscription_end_date);\n    statusText = `Aktif (Sona Erme: ${format(endDate, 'dd MMM yyyy', {\n      locale: tr\n    })})`;\n  } else if (isCancelled) {\n    statusText = \"Pasif (SÃ¼resi Doldu - Ãœcretsiz Plan)\";\n  }\n\n  // YÃ¼kseltme kartlarÄ± iÃ§in listeyi oluÅŸtur.\n  // Sadece \"free\" olmayan planlarÄ± gÃ¶steriyoruz.\n  const upgradePlans = Object.entries(PLAN_VARIANTS).map(([level, variant]) => ({\n    level,\n    ...variant,\n    ...LIMITS[level]\n  }));\n\n  // YÃ¼kseltme butonunun metnini belirleyen helper\n  const getButtonText = level => {\n    if (level === status.subscription_level) {\n      return status.is_subscription_active ? 'Mevcut PlanÄ±nÄ±z' : 'Yeniden Abone Ol';\n    }\n\n    // Aktif bir aboneliÄŸi varsa\n    if (status.is_subscription_active) {\n      // Daha dÃ¼ÅŸÃ¼k bir plana geÃ§iyorsa\n      const isDowngrade = LIMITS[level].syncs < LIMITS[status.subscription_level].syncs;\n      return isDowngrade ? 'Åžimdi DÃ¼ÅŸÃ¼r' : 'Åžimdi YÃ¼kselt';\n    }\n\n    // Aktif aboneliÄŸi yoksa, herhangi bir plan iÃ§in \"Abone Ol\" butonu gÃ¶rÃ¼nÃ¼r.\n    return 'Abone Ol';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"profile-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Profil ve Abonelik Y\\xF6netimi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"E-Posta: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: status.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"current-status-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Mevcut Abonelik Durumunuz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-item current-plan\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-label\",\n            children: \"Plan Seviyesi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-value\",\n            children: activeLevelLabel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `status-item ${status.is_subscription_active ? 'active-status' : 'inactive-status'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-label\",\n            children: \"Abonelik Durumu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-value\",\n            children: statusText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"current-limits-detail\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"limit-detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"limit-value\",\n            children: activeLevelInfo.syncs === 9999 ? 'SÄ±nÄ±rsÄ±z' : activeLevelInfo.syncs\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"limit-label\",\n            children: \"Oto Senkronizasyon \\u0130\\u015Fi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"limit-detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"limit-value\",\n            children: [\"Her \", activeLevelInfo.interval, \" Dakikada Bir\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"limit-label\",\n            children: \"Minimum Senkronizasyon Aral\\u0131\\u011F\\u0131\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"upgrade-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Plan\\u0131n\\u0131z\\u0131 Y\\xF6netin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"plan-grid\",\n        children: upgradePlans.map(plan => {\n          const level = plan.level;\n          const isCurrent = level === status.subscription_level;\n          const buttonText = getButtonText(level);\n          const isDisabled = isCurrent && status.is_subscription_active; // Aktif aboneliÄŸi varken kendi planÄ±nÄ±n butonu devre dÄ±ÅŸÄ±\n\n          // Lemon Squeezy URL'si oluÅŸturma\n          const checkoutUrl = getLemonSqueezyCheckoutUrl(plan.id, plan.level);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `plan-card ${isCurrent ? 'current' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: plan.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"plan-price\",\n              children: [\"$\", plan.price, \" / ay\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"plan-features\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: [plan.syncs === 9999 ? 'SÄ±nÄ±rsÄ±z' : plan.syncs, \" Oto Sync \\u0130\\u015Fi\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Her \", plan.interval, \" dakikada bir senk.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: checkoutUrl,\n              target: \"_blank\" // Yeni sekmede aÃ§ar\n              ,\n              rel: \"noopener noreferrer\",\n              className: `btn btn-upgrade ${isDisabled ? 'disabled-link' : ''}`,\n              \"aria-disabled\": isDisabled\n              // Butonun kendisi hala tÄ±klanabilir olduÄŸu iÃ§in disabled sÄ±nÄ±fÄ± ile stil veriyoruz\n              ,\n              children: buttonText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 33\n            }, this), isCurrent && status.is_subscription_active && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"plan-note\",\n              children: [\"Plan\\u0131n\\u0131z\\u0131 y\\xF6netmek (iptal/y\\xFCkseltme/d\\xFC\\u015F\\xFCrme) i\\xE7in e-posta adresinizle \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `${LEMONSQUEEZY_STORE_URL}/billing?email=${status.email}`,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: \"Lemon Squeezy M\\xFC\\u015Fteri Portal\\u0131na\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 111\n              }, this), \" giri\\u015F yap\\u0131n.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 37\n            }, this)]\n          }, level, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"delete-account-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Hesab\\u0131 Kal\\u0131c\\u0131 Olarak Sil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"**D\\u0130KKAT!** Bu i\\u015Flem geri al\\u0131namaz. Hesab\\u0131n\\u0131z\\u0131 sildi\\u011Finizde, t\\xFCm senkronizasyon ayarlar\\u0131n\\u0131z, kay\\u0131tl\\u0131 Excel ve Notion ba\\u011Flant\\u0131lar\\u0131n\\u0131z **kal\\u0131c\\u0131 olarak silinecektir**. Verileriniz, **\\u015Eartlar ve Ko\\u015Fullar\\u0131m\\u0131zda** belirtilen 30 g\\xFCnl\\xFCk saklama s\\xFCresini takiben sunucular\\u0131m\\u0131zdan temizlenecektir.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDeleteAccount,\n        className: \"btn btn-danger delete-btn\",\n        children: \"Hesab\\u0131m\\u0131 Sil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"XzKmtSDcogMycxCEX0nyPa185+I=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","format","parseISO","tr","jsxDEV","_jsxDEV","API_BASE_URL","LEMONSQUEEZY_STORE_URL","PLAN_VARIANTS","basic","id","price","cta_text","pro","exclusive","LIMITS","free","label","syncs","interval","Profile","setStep","_s","userId","localStorage","getItem","status","setStatus","message","setMessage","isLoading","setIsLoading","fetchSubscriptionStatus","response","fetch","ok","Error","data","json","error","console","handleDeleteAccount","window","confirm","method","errorData","detail","removeItem","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getLemonSqueezyCheckoutUrl","variantId","planLevel","isCurrentPlan","subscription_level","is_subscription_active","email","activeLevelInfo","activeLevelLabel","isCancelled","subscription_end_date","Date","statusText","endDate","locale","upgradePlans","Object","entries","map","level","variant","getButtonText","isDowngrade","plan","isCurrent","buttonText","isDisabled","checkoutUrl","href","target","rel","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Taha/Desktop/notion-excel-sync/excel-notion-ui/src/Profile.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { format, parseISO } from 'date-fns'; // Tarih formatlama iÃ§in\r\nimport './Profile.css'; \r\nimport { tr } from 'date-fns/locale';\r\n\r\n// Backend ve Lemon Squeezy URL'leri\r\nconst API_BASE_URL = 'http://127.0.0.1:8000';\r\n// ðŸš¨ KRÄ°TÄ°K: Kendi Lemon Squeezy Store URL'niz\r\nconst LEMONSQUEEZY_STORE_URL = 'https://notixel.lemonsqueezy.com'; \r\n\r\n// ðŸš¨ KRÄ°TÄ°K: subscription.py ve Pricing.tsx ile EÅžLEÅžMELÄ°DÄ°R\r\nconst PLAN_VARIANTS: { [key: string]: { id: number; price: string; cta_text: string } } = {\r\n    basic: { id: 1035879, price: \"10\", cta_text: \"Basic\" }, \r\n    pro: { id: 1035902, price: \"20\", cta_text: \"Pro\" },\r\n    exclusive: { id: 1035903, price: \"50\", cta_text: \"Exclusive\" },\r\n};\r\n\r\n// API'den gelen verinin yapÄ±sÄ± (UserSubscriptionStatus Pydantic modeline karÅŸÄ±lÄ±k gelir)\r\ninterface SubscriptionStatus {\r\n    email: string;\r\n    subscription_level: string; // 'free', 'basic', 'pro', 'exclusive'\r\n    is_subscription_active: boolean; // Ã–denen dÃ¶nem iÃ§inde aktif mi?\r\n    subscription_end_date: string | null; // BitiÅŸ tarihi (ISO formatÄ±nda string)\r\n}\r\n\r\n// Config.py'deki limitleri gÃ¶stermek iÃ§in basit bir map\r\nconst LIMITS: { [key: string]: { label: string; syncs: number; interval: number } } = {\r\n    free: { label: \"Free (VarsayÄ±lan)\", syncs: 0, interval: 60 },\r\n    basic: { label: \"Basic Plan\", syncs: 3, interval: 60 },\r\n    pro: { label: \"Pro Plan\", syncs: 10, interval: 30 },\r\n    exclusive: { label: \"Exclusive Plan\", syncs: 9999, interval: 15 },\r\n};\r\n\r\ninterface ProfileProps {\r\n    setStep: (step: 'home' | 'connect') => void; // Hesap silindikten sonra yÃ¶nlendirme iÃ§in\r\n}\r\n\r\nconst Profile: React.FC<ProfileProps> = ({ setStep }) => {\r\n    const userId = localStorage.getItem('user_id');\r\n    const [status, setStatus] = useState<SubscriptionStatus | null>(null);\r\n    const [message, setMessage] = useState<string | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // --- 1. Abonelik Durumunu Ã‡ekme ---\r\n    const fetchSubscriptionStatus = useCallback(async (id: string) => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/subscription/status/${id}`);\r\n            if (!response.ok) {\r\n                throw new Error(\"Abonelik durumu alÄ±namadÄ±.\");\r\n            }\r\n            const data: SubscriptionStatus = await response.json();\r\n            setStatus(data);\r\n        } catch (error) {\r\n            setMessage(\"Abonelik durumunuz yÃ¼klenirken bir sorun oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin.\");\r\n            console.error(error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (userId) {\r\n            fetchSubscriptionStatus(userId);\r\n        } else {\r\n            setMessage(\"GÃ¶rÃ¼ntÃ¼lenecek kullanÄ±cÄ± verisi yok. LÃ¼tfen tekrar giriÅŸ yapÄ±n.\");\r\n            setIsLoading(false);\r\n        }\r\n    }, [userId, fetchSubscriptionStatus]);\r\n\r\n\r\n    // --- 2. Hesap Silme Ä°ÅŸlemi ---\r\n    const handleDeleteAccount = async () => {\r\n        if (!userId) {\r\n            setMessage(\"KullanÄ±cÄ± kimliÄŸi bulunamadÄ±.\");\r\n            return;\r\n        }\r\n\r\n        if (!window.confirm(\"HesabÄ±nÄ±zÄ± ve tÃ¼m verilerinizi kalÄ±cÄ± olarak silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz.\")) {\r\n            return;\r\n        }\r\n\r\n        setMessage(\"HesabÄ±nÄ±z siliniyor...\");\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/subscription/delete-account/${userId}`, {\r\n                method: 'DELETE',\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.detail || \"Hesap silinirken bir hata oluÅŸtu.\");\r\n            }\r\n\r\n            // BaÅŸarÄ±lÄ± olursa, yerel depolamayÄ± temizle ve ana sayfaya yÃ¶nlendir\r\n            localStorage.removeItem('user_id');\r\n            localStorage.removeItem('excel_file_id');\r\n            localStorage.removeItem('excel_file_name');\r\n            localStorage.removeItem('notion_database_id');\r\n            localStorage.removeItem('notion_db_name');\r\n            localStorage.removeItem('user_email');\r\n            \r\n            alert(\"HesabÄ±nÄ±z ve tÃ¼m verileriniz silinmiÅŸtir. 30 gÃ¼n sonra verileriniz sunucumuzdan tamamen temizlenecektir.\");\r\n            setStep('home');\r\n\r\n        } catch (error) {\r\n            setMessage(`Hata: ${error instanceof Error ? error.message : \"Bilinmeyen bir hata oluÅŸtu.\"}`);\r\n        }\r\n    };\r\n    \r\n    // YÃ¼kleniyor durumu\r\n    if (isLoading) {\r\n        return <div className=\"profile-container\">Loading subscription status...</div>;\r\n    }\r\n\r\n    if (!status) {\r\n        return <div className=\"profile-container error-message\">KullanÄ±cÄ± profil bilgileri yÃ¼klenemiyor.</div>;\r\n    }\r\n    \r\n    // --- 3. Lemon Squeezy URL'si OluÅŸturma Fonksiyonu ---\r\n    const getLemonSqueezyCheckoutUrl = (variantId: number, planLevel: string): string => {\r\n        // Lemon Squeezy'nin \"Upgrade/Downgrade\" URL yapÄ±sÄ±\r\n        // ðŸš¨ KRÄ°TÄ°K: user_email'i ileterek, var olan bir abonelik varsa otomatik olarak YÃ¼kseltme/DÃ¼ÅŸÃ¼rme arayÃ¼zÃ¼ne yÃ¶nlendirilir.\r\n        \r\n        // EÄŸer kullanÄ±cÄ± bir planÄ± zaten iptal etmiÅŸse ve end_date bilgisi varsa, \r\n        // Lemon Squeezy onu yÃ¼kseltme/dÃ¼ÅŸÃ¼rme yerine yeni bir abonelik baÅŸlatmaya yÃ¶nlendirir.\r\n        \r\n        const isCurrentPlan = planLevel === status.subscription_level;\r\n        \r\n        // Aktif abonelik varsa ve mevcut planÄ± deÄŸilse, yÃ¼kseltme/dÃ¼ÅŸÃ¼rme akÄ±ÅŸÄ±nÄ± baÅŸlat (checkout'un Ã¼zerine yazma)\r\n        if (status.is_subscription_active && !isCurrentPlan) {\r\n            // Ã–rnek: https://notixel.lemonsqueezy.com/billing?email=user@example.com\r\n            // Bu, kullanÄ±cÄ±nÄ±n mevcut aboneliÄŸini yÃ¶nettiÄŸi sayfaya yÃ¶nlendirir.\r\n             return `${LEMONSQUEEZY_STORE_URL}/billing?email=${status.email}`;\r\n        } \r\n        \r\n        // Aktif abonelik yoksa veya mevcut planÄ± satÄ±n almaya Ã§alÄ±ÅŸÄ±yorsa (yenileme/yeni)\r\n        // Standart checkout linki: https://notixel.lemonsqueezy.com/checkout/12345?email=user@example.com\r\n        return `${LEMONSQUEEZY_STORE_URL}/checkout/${variantId}?email=${status.email}`;\r\n    };\r\n\r\n\r\n    // --- 4. Render Edilecek BileÅŸen ---\r\n    const activeLevelInfo = LIMITS[status.subscription_level] || LIMITS['free'];\r\n    const activeLevelLabel = activeLevelInfo.label;\r\n    \r\n    const isCancelled = status.subscription_end_date && parseISO(status.subscription_end_date) < new Date();\r\n    \r\n    // EÄŸer iptal edilmiÅŸse bile, bitiÅŸ tarihine kadar aktif sayÄ±lÄ±r.\r\n    let statusText = status.is_subscription_active \r\n        ? \"Aktif (Ã–denmiÅŸ DÃ¶nem Ä°Ã§inde)\" \r\n        : \"Pasif (Ãœcretsiz Plana DÃ¶ndÃ¼rÃ¼ldÃ¼)\";\r\n\r\n    if (status.subscription_end_date && status.is_subscription_active) {\r\n        const endDate = parseISO(status.subscription_end_date);\r\n        statusText = `Aktif (Sona Erme: ${format(endDate, 'dd MMM yyyy', { locale: tr })})`;\r\n    } else if (isCancelled) {\r\n        statusText = \"Pasif (SÃ¼resi Doldu - Ãœcretsiz Plan)\";\r\n    }\r\n    \r\n    // YÃ¼kseltme kartlarÄ± iÃ§in listeyi oluÅŸtur.\r\n    // Sadece \"free\" olmayan planlarÄ± gÃ¶steriyoruz.\r\n    const upgradePlans = Object.entries(PLAN_VARIANTS)\r\n        .map(([level, variant]) => ({\r\n            level,\r\n            ...variant,\r\n            ...LIMITS[level]\r\n        }));\r\n    \r\n    // YÃ¼kseltme butonunun metnini belirleyen helper\r\n    const getButtonText = (level: string) => {\r\n        if (level === status.subscription_level) {\r\n            return status.is_subscription_active ? 'Mevcut PlanÄ±nÄ±z' : 'Yeniden Abone Ol';\r\n        }\r\n        \r\n        // Aktif bir aboneliÄŸi varsa\r\n        if (status.is_subscription_active) {\r\n            // Daha dÃ¼ÅŸÃ¼k bir plana geÃ§iyorsa\r\n            const isDowngrade = LIMITS[level].syncs < LIMITS[status.subscription_level].syncs;\r\n            return isDowngrade ? 'Åžimdi DÃ¼ÅŸÃ¼r' : 'Åžimdi YÃ¼kselt';\r\n        }\r\n        \r\n        // Aktif aboneliÄŸi yoksa, herhangi bir plan iÃ§in \"Abone Ol\" butonu gÃ¶rÃ¼nÃ¼r.\r\n        return 'Abone Ol';\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"profile-container\">\r\n            <header className=\"profile-header\">\r\n                <h1>Profil ve Abonelik YÃ¶netimi</h1>\r\n                <p>E-Posta: <strong>{status.email}</strong></p>\r\n            </header>\r\n            \r\n            {/* --- MEVCUT DURUM KARTI --- */}\r\n            <section className=\"current-status-card\">\r\n                <h2>Mevcut Abonelik Durumunuz</h2>\r\n                <div className=\"status-grid\">\r\n                    <div className=\"status-item current-plan\">\r\n                        <span className=\"status-label\">Plan Seviyesi</span>\r\n                        <span className=\"status-value\">{activeLevelLabel}</span>\r\n                    </div>\r\n                    <div className={`status-item ${status.is_subscription_active ? 'active-status' : 'inactive-status'}`}>\r\n                        <span className=\"status-label\">Abonelik Durumu</span>\r\n                        <span className=\"status-value\">{statusText}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"current-limits-detail\">\r\n                    <div className=\"limit-detail\">\r\n                        <span className=\"limit-value\">{activeLevelInfo.syncs === 9999 ? 'SÄ±nÄ±rsÄ±z' : activeLevelInfo.syncs}</span>\r\n                        <span className=\"limit-label\">Oto Senkronizasyon Ä°ÅŸi</span>\r\n                    </div>\r\n                    <div className=\"limit-detail\">\r\n                        <span className=\"limit-value\">Her {activeLevelInfo.interval} Dakikada Bir</span>\r\n                        <span className=\"limit-label\">Minimum Senkronizasyon AralÄ±ÄŸÄ±</span>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            \r\n            {/* --- DÄ°ÄžER PLANLAR VE YÃœKSELTME SEÃ‡ENEKLERÄ° --- */}\r\n            <section className=\"upgrade-section\">\r\n                <h2>PlanÄ±nÄ±zÄ± YÃ¶netin</h2>\r\n                <div className=\"plan-grid\">\r\n                    {upgradePlans.map((plan) => {\r\n                        const level = plan.level;\r\n                        const isCurrent = level === status.subscription_level;\r\n                        const buttonText = getButtonText(level);\r\n                        const isDisabled = isCurrent && status.is_subscription_active; // Aktif aboneliÄŸi varken kendi planÄ±nÄ±n butonu devre dÄ±ÅŸÄ±\r\n\r\n                        // Lemon Squeezy URL'si oluÅŸturma\r\n                        const checkoutUrl = getLemonSqueezyCheckoutUrl(plan.id, plan.level);\r\n                        \r\n                        return (\r\n                            <div key={level} className={`plan-card ${isCurrent ? 'current' : ''}`}>\r\n                                <h3>{plan.label}</h3>\r\n                                <p className=\"plan-price\">\r\n                                    ${plan.price} / ay\r\n                                </p>\r\n                                <ul className=\"plan-features\">\r\n                                    <li>{plan.syncs === 9999 ? 'SÄ±nÄ±rsÄ±z' : plan.syncs} Oto Sync Ä°ÅŸi</li>\r\n                                    <li>Her {plan.interval} dakikada bir senk.</li>\r\n                                </ul>\r\n\r\n                                <a \r\n                                    href={checkoutUrl}\r\n                                    target=\"_blank\" // Yeni sekmede aÃ§ar\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className={`btn btn-upgrade ${isDisabled ? 'disabled-link' : ''}`}\r\n                                    aria-disabled={isDisabled}\r\n                                    // Butonun kendisi hala tÄ±klanabilir olduÄŸu iÃ§in disabled sÄ±nÄ±fÄ± ile stil veriyoruz\r\n                                >\r\n                                    {buttonText}\r\n                                </a>\r\n                                {isCurrent && status.is_subscription_active && (\r\n                                    <p className=\"plan-note\">\r\n                                        PlanÄ±nÄ±zÄ± yÃ¶netmek (iptal/yÃ¼kseltme/dÃ¼ÅŸÃ¼rme) iÃ§in e-posta adresinizle <a href={`${LEMONSQUEEZY_STORE_URL}/billing?email=${status.email}`} target=\"_blank\" rel=\"noopener noreferrer\">Lemon Squeezy MÃ¼ÅŸteri PortalÄ±na</a> giriÅŸ yapÄ±n.\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </section>\r\n\r\n            {message && <p className=\"error-message\">{message}</p>}\r\n            \r\n            {/* --- HESAP SÄ°LME BÃ–LÃœMÃœ --- */}\r\n            <section className=\"delete-account-section\">\r\n                <h2>HesabÄ± KalÄ±cÄ± Olarak Sil</h2>\r\n                <p>\r\n                    **DÄ°KKAT!** Bu iÅŸlem geri alÄ±namaz. HesabÄ±nÄ±zÄ± sildiÄŸinizde, tÃ¼m senkronizasyon ayarlarÄ±nÄ±z, kayÄ±tlÄ± Excel ve Notion baÄŸlantÄ±larÄ±nÄ±z **kalÄ±cÄ± olarak silinecektir**. Verileriniz, **Åžartlar ve KoÅŸullarÄ±mÄ±zda** belirtilen 30 gÃ¼nlÃ¼k saklama sÃ¼resini takiben sunucularÄ±mÄ±zdan temizlenecektir.\r\n                </p>\r\n                <button \r\n                    onClick={handleDeleteAccount} \r\n                    className=\"btn btn-danger delete-btn\"\r\n                >\r\n                    HesabÄ±mÄ± Sil\r\n                </button>\r\n            </section>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}